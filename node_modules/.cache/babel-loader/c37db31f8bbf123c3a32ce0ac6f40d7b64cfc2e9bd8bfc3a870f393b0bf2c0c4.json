{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'ChatView',\n  data() {\n    return {\n      messages: [],\n      newMsg: '',\n      delBtn: false,\n      emptyMsg: true,\n      username: localStorage.getItem('username')\n    };\n  },\n  // computed() {\n  //     localStorage.setItem('username', this.$route.query.username)\n  // },\n  methods: {\n    sendMsg() {\n      if (!this.username) {\n        this.username = 'Аноним';\n      }\n      if (this.newMsg !== '') {\n        this.emptyMsg = false;\n        this.messages.push({\n          id: new Date().getTime(),\n          text: this.newMsg,\n          user: this.username\n        });\n        this.saveChatRecords();\n        this.newMsg = '';\n        this.delBtn = true;\n      } else {\n        alert('Пожалуйста, введите сообщение');\n      }\n    },\n    delMsg() {\n      this.messages = [];\n      localStorage.removeItem(`messages_${this.username}`, JSON.stringify(this.message));\n      this.emptyMsg = true;\n    },\n    saveChatRecords() {\n      const records = this.messages;\n      console.log(records);\n      localStorage.setItem(`messages_${this.username}`, JSON.stringify(this.records));\n    },\n    loadChatRecords() {\n      const records = JSON.parse(localStorage.getItem(`messages_${this.username}`));\n      if (records) {\n        this.messages = records;\n        this.emptyMsg = false;\n      }\n    }\n  }\n  // created() {\n  //     this.loadChatRecords()\n  // }\n};","map":{"version":3,"names":["name","data","messages","newMsg","delBtn","emptyMsg","username","localStorage","getItem","methods","sendMsg","push","id","Date","getTime","text","user","saveChatRecords","alert","delMsg","removeItem","JSON","stringify","message","records","console","log","setItem","loadChatRecords","parse"],"sources":["/Users/vladmelnikov/vscodeProjects/Синергия/6 урок/На вебинаре 1/project/src/components/NewsView.vue"],"sourcesContent":["<template>\n    <div v-if='username'>\n        <div>\n            <h2>Чат</h2>\n            <div v-for='message in messages' :key='message.id'>\n                {{ message.username }}: {{ message.text }}\n            </div>\n            <div v-if='emptyMsg'>Нет сообщений</div>\n        </div>\n        <div>\n            <input v-model='newMsg' placeholder='Введите Ваше сообщение'>\n            <button v-on:click='sendMsg' v-on:keyup.enter='sendMsg'>Отправить</button>\n            <button v-show='delBtn' v-on:click='delMsg'>Удалить переписку</button>\n        </div>\n    </div>\n    <div v-else>\n        Для регистрации перейдите по <router-link :to=\"{name: 'home'}\">ссылке</router-link>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'ChatView',\n    data() {\n        return {\n            messages: [],\n            newMsg: '',\n            delBtn: false,\n            emptyMsg: true,\n            username: localStorage.getItem('username')\n        }\n    },\n    // computed() {\n    //     localStorage.setItem('username', this.$route.query.username)\n    // },\n    methods: {\n        sendMsg() {\n            if (!this.username){\n                this.username = 'Аноним'\n            }\n            if (this.newMsg !== ''){\n                this.emptyMsg = false\n                this.messages.push(\n                    {\n                        id: new Date().getTime(),\n                        text: this.newMsg,\n                        user: this.username\n                    }\n                )\n                this.saveChatRecords()\n                this.newMsg = ''\n                this.delBtn = true\n            }else {\n                alert('Пожалуйста, введите сообщение')\n            }\n        },\n        delMsg() {\n            this.messages = []\n            localStorage.removeItem(`messages_${this.username}`, JSON.stringify(this.message))\n            this.emptyMsg = true\n        },\n        saveChatRecords() {\n            const records = this.messages\n            console.log(records)\n            localStorage.setItem(`messages_${this.username}`, JSON.stringify(this.records))\n        },\n        loadChatRecords() {\n            const records = JSON.parse(localStorage.getItem(`messages_${this.username}`))\n            if (records){\n                this.messages = records\n                this.emptyMsg = false\n            }\n        }\n    },\n    // created() {\n    //     this.loadChatRecords()\n    // }\n}\n</script>"],"mappings":";AAqBA,eAAe;EACXA,IAAI,EAAE,UAAU;EAChBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE,KAAK;MACbC,QAAQ,EAAE,IAAI;MACdC,QAAQ,EAAEC,YAAY,CAACC,OAAO,CAAC,UAAU;IAC7C;EACJ,CAAC;EACD;EACA;EACA;EACAC,OAAO,EAAE;IACLC,OAAOA,CAAA,EAAG;MACN,IAAI,CAAC,IAAI,CAACJ,QAAQ,EAAC;QACf,IAAI,CAACA,QAAO,GAAI,QAAO;MAC3B;MACA,IAAI,IAAI,CAACH,MAAK,KAAM,EAAE,EAAC;QACnB,IAAI,CAACE,QAAO,GAAI,KAAI;QACpB,IAAI,CAACH,QAAQ,CAACS,IAAI,CACd;UACIC,EAAE,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;UACxBC,IAAI,EAAE,IAAI,CAACZ,MAAM;UACjBa,IAAI,EAAE,IAAI,CAACV;QACf,CACJ;QACA,IAAI,CAACW,eAAe,CAAC;QACrB,IAAI,CAACd,MAAK,GAAI,EAAC;QACf,IAAI,CAACC,MAAK,GAAI,IAAG;MACrB,CAAC,MAAK;QACFc,KAAK,CAAC,+BAA+B;MACzC;IACJ,CAAC;IACDC,MAAMA,CAAA,EAAG;MACL,IAAI,CAACjB,QAAO,GAAI,EAAC;MACjBK,YAAY,CAACa,UAAU,CAAE,YAAW,IAAI,CAACd,QAAS,EAAC,EAAEe,IAAI,CAACC,SAAS,CAAC,IAAI,CAACC,OAAO,CAAC;MACjF,IAAI,CAAClB,QAAO,GAAI,IAAG;IACvB,CAAC;IACDY,eAAeA,CAAA,EAAG;MACd,MAAMO,OAAM,GAAI,IAAI,CAACtB,QAAO;MAC5BuB,OAAO,CAACC,GAAG,CAACF,OAAO;MACnBjB,YAAY,CAACoB,OAAO,CAAE,YAAW,IAAI,CAACrB,QAAS,EAAC,EAAEe,IAAI,CAACC,SAAS,CAAC,IAAI,CAACE,OAAO,CAAC;IAClF,CAAC;IACDI,eAAeA,CAAA,EAAG;MACd,MAAMJ,OAAM,GAAIH,IAAI,CAACQ,KAAK,CAACtB,YAAY,CAACC,OAAO,CAAE,YAAW,IAAI,CAACF,QAAS,EAAC,CAAC;MAC5E,IAAIkB,OAAO,EAAC;QACR,IAAI,CAACtB,QAAO,GAAIsB,OAAM;QACtB,IAAI,CAACnB,QAAO,GAAI,KAAI;MACxB;IACJ;EACJ;EACA;EACA;EACA;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}