{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'ChatView',\n  data() {\n    return {\n      messages: [],\n      newMsg: '',\n      delBtn: false,\n      emptyMsg: true,\n      username: localStorage.getItem('username')\n    };\n  },\n  computed() {\n    localStorage.setItem('username', this.$route.query.username);\n  },\n  methods: {\n    sendMsg() {\n      if (!this.user) {\n        this.user = 'Аноним';\n      }\n      if (this.newMsg !== '') {\n        this.emptyMsg = false;\n        this.messages.push({\n          id: new Date().getTime(),\n          text: this.newMsg,\n          user: this.username\n        });\n        this.saveChatRecords();\n        this.newMsg = '';\n        this.delBtn = true;\n      } else {\n        alert('Пожалуйста, введите сообщение');\n      }\n    },\n    delMsg() {\n      this.messages = [];\n      localStorage.removeItem(`messages_${this.user}`, JSON.stringify(this.message));\n      this.emptyMsg = true;\n      this.delBtn = false;\n    },\n    saveChatRecords() {\n      const records = this.messages;\n      console.log(records);\n      localStorage.setItem(`messages_${this.user}`, JSON.stringify(records));\n    },\n    loadChatRecords() {\n      const records = JSON.parse(localStorage.getItem(`messages_${this.user}`));\n      if (records) {\n        this.messages = records;\n        this.emptyMsg = false;\n      }\n    }\n  },\n  created() {\n    this.loadChatRecords();\n  }\n};","map":{"version":3,"names":["name","data","messages","newMsg","delBtn","emptyMsg","username","localStorage","getItem","computed","setItem","$route","query","methods","sendMsg","user","push","id","Date","getTime","text","saveChatRecords","alert","delMsg","removeItem","JSON","stringify","message","records","console","log","loadChatRecords","parse","created"],"sources":["/Users/vladmelnikov/vscodeProjects/Синергия/6 урок/На вебинаре 1/project/src/components/ChatView.vue"],"sourcesContent":["<template>\n    <div v-if='username'>\n        <div class='containerChat'>\n            <h2>Чат</h2>\n            <div v-for='message in messages' :key='message.id'>\n                {{ message.user }}: {{ message.text }}\n            </div>\n            <div v-if='emptyMsg'>Нет сообщений</div>\n        </div>\n        <div>\n            <input v-model='newMsg' placeholder='Введите сообщение' v-on:keyup.enter='sendMsg'>\n            <button v-on:click='sendMsg' class='buttonSend'>Отправить</button>\n            <button v-show='delBtn' v-on:click='delMsg' class='buttonDel'>Удалить переписку</button>\n        </div>\n    </div>\n    <div v-else class='wrapperChat'>\n        Для регистрации перейдите по <router-link :to=\"{name: 'home'}\">ссылке</router-link>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'ChatView',\n    data() {\n        return {\n            messages: [],\n            newMsg: '',\n            delBtn: false,\n            emptyMsg: true,\n            username: localStorage.getItem('username')\n        }\n    },\n    computed() {\n        localStorage.setItem('username', this.$route.query.username)\n    },\n    methods: {\n        sendMsg() {\n            if (!this.user){\n                this.user = 'Аноним'\n            }\n            if (this.newMsg !== ''){\n                this.emptyMsg = false\n                this.messages.push(\n                    {\n                        id: new Date().getTime(),\n                        text: this.newMsg,\n                        user: this.username\n                    }\n                )\n                this.saveChatRecords()\n                this.newMsg = ''\n                this.delBtn = true\n            }else {\n                alert('Пожалуйста, введите сообщение')\n            }\n        },\n        delMsg() {\n            this.messages = []\n            localStorage.removeItem(`messages_${this.user}`, JSON.stringify(this.message))\n            this.emptyMsg = true\n            this.delBtn = false\n        },\n        saveChatRecords() {\n            const records = this.messages\n            console.log(records)\n            localStorage.setItem(`messages_${this.user}`, JSON.stringify(records))\n        },\n        loadChatRecords() {\n            const records = JSON.parse(localStorage.getItem(`messages_${this.user}`))\n            if (records){\n                this.messages = records\n                this.emptyMsg = false\n            }\n        }\n    },\n    created() {\n        this.loadChatRecords()\n    }\n}\n</script>\n\n<style>\n.containerChat{\n    width: 30vw;\n    height: 70vh;\n    border: 8px solid rgb(225, 175, 115);\n    color: black;\n    font-weight: 20px;\n    margin: 5vh auto 20px;\n}\n\n.buttonSend{\n    width: 100px;\n    height: 30px;\n    font-size: 15px;\n    background-color: rgb(180, 212, 104);\n    margin-left: 10px;\n}\n\n.buttonDel{\n    width: 150px;\n    height: 30px;\n    font-size: 15px;\n    background-color: rgb(180, 212, 104);\n    margin-left: 10px;\n}\n\n.containerChat > h2 {\n    text-decoration: underline;\n}\n\n.wrapperChat{\n    font-size: 30px;\n    width: 350px;\n    height: 50px;\n    margin: 0 auto;\n    padding-top: 40vh;\n    padding-bottom: 40vh;\n}\n</style>"],"mappings":";AAqBA,eAAe;EACXA,IAAI,EAAE,UAAU;EAChBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE,KAAK;MACbC,QAAQ,EAAE,IAAI;MACdC,QAAQ,EAAEC,YAAY,CAACC,OAAO,CAAC,UAAU;IAC7C;EACJ,CAAC;EACDC,QAAQA,CAAA,EAAG;IACPF,YAAY,CAACG,OAAO,CAAC,UAAU,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACN,QAAQ;EAC/D,CAAC;EACDO,OAAO,EAAE;IACLC,OAAOA,CAAA,EAAG;MACN,IAAI,CAAC,IAAI,CAACC,IAAI,EAAC;QACX,IAAI,CAACA,IAAG,GAAI,QAAO;MACvB;MACA,IAAI,IAAI,CAACZ,MAAK,KAAM,EAAE,EAAC;QACnB,IAAI,CAACE,QAAO,GAAI,KAAI;QACpB,IAAI,CAACH,QAAQ,CAACc,IAAI,CACd;UACIC,EAAE,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;UACxBC,IAAI,EAAE,IAAI,CAACjB,MAAM;UACjBY,IAAI,EAAE,IAAI,CAACT;QACf,CACJ;QACA,IAAI,CAACe,eAAe,CAAC;QACrB,IAAI,CAAClB,MAAK,GAAI,EAAC;QACf,IAAI,CAACC,MAAK,GAAI,IAAG;MACrB,CAAC,MAAK;QACFkB,KAAK,CAAC,+BAA+B;MACzC;IACJ,CAAC;IACDC,MAAMA,CAAA,EAAG;MACL,IAAI,CAACrB,QAAO,GAAI,EAAC;MACjBK,YAAY,CAACiB,UAAU,CAAE,YAAW,IAAI,CAACT,IAAK,EAAC,EAAEU,IAAI,CAACC,SAAS,CAAC,IAAI,CAACC,OAAO,CAAC;MAC7E,IAAI,CAACtB,QAAO,GAAI,IAAG;MACnB,IAAI,CAACD,MAAK,GAAI,KAAI;IACtB,CAAC;IACDiB,eAAeA,CAAA,EAAG;MACd,MAAMO,OAAM,GAAI,IAAI,CAAC1B,QAAO;MAC5B2B,OAAO,CAACC,GAAG,CAACF,OAAO;MACnBrB,YAAY,CAACG,OAAO,CAAE,YAAW,IAAI,CAACK,IAAK,EAAC,EAAEU,IAAI,CAACC,SAAS,CAACE,OAAO,CAAC;IACzE,CAAC;IACDG,eAAeA,CAAA,EAAG;MACd,MAAMH,OAAM,GAAIH,IAAI,CAACO,KAAK,CAACzB,YAAY,CAACC,OAAO,CAAE,YAAW,IAAI,CAACO,IAAK,EAAC,CAAC;MACxE,IAAIa,OAAO,EAAC;QACR,IAAI,CAAC1B,QAAO,GAAI0B,OAAM;QACtB,IAAI,CAACvB,QAAO,GAAI,KAAI;MACxB;IACJ;EACJ,CAAC;EACD4B,OAAOA,CAAA,EAAG;IACN,IAAI,CAACF,eAAe,CAAC;EACzB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}